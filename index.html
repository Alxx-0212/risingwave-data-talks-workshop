<div>
  <canvas id="myChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  async function demo() {
    const ctx = document.getElementById('myChart');

    const data = {
      labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
      datasets: [{
        label: '# of Votes',
        data: [12, 19, 3, 5, 2, 1],
        borderWidth: 1
      }]
    }

    const chart = new Chart(ctx, {
      responsive: true,
      type: 'bar',
      data: data,
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
    for (let i = 1; i < 100; i++) {
      await sleep(100)
      // chart.data.labels.push('New Label ' + i)
      let prev_label = chart.data.labels[0]
      chart.data.labels[0] = chart.data.labels[1]
      chart.data.labels[1] = prev_label

      chart.data.datasets.forEach((dataset) => {
        dataset.data = dataset.data.map((value) => value + 1)
        let prev = dataset.data[0]
        dataset.data[0] = dataset.data[1]
        dataset.data[1] = prev
      })
      // chart.update('none')
      chart.update()
    }
  }

  demo()
</script>

